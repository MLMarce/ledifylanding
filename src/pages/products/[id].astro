---
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export const getStaticPaths = async () => {
  const products = await getCollection("products");
  return products.map((product) => ({
    params: { id: product.slug },
    props: { product },
  }));
};

const { product } = Astro.props;
const productData = product.data;
const features = productData.features;
---

<Layout title={`${product.slug} - Ledify`}>
  <h1>{productData.title}</h1>
  <img src={productData.image} alt={productData.title} />
  <p>{productData.description}</p>
  <ul>
    {features ? features.map((feature) => <li>{feature}</li>) : null}
  </ul>
  <p><strong>Precio:</strong> {productData.price}</p>
  {
    productData.isAvailable ? (
      <p>
        <strong>Â¡Disponible!</strong>
      </p>
    ) : (
      <p>
        <strong>Agotado</strong>
      </p>
    )
  }
</Layout>
